# Модуль Создание виртуальной машины

## Описание
Модуль greating-VM-module предназначен для создания виртуальной машины в Yandex Cloud с автоматическим выбором подсети на основе указанной зоны доступности.

## Функционал
Модуль выполняет следующие операции:
- Создает виртуальную машину в Yandex Cloud
- Автоматически выбирает подсеть на основе указанной зоны доступности
- Получает все подсети в указанной VPC
- Фильтрует подсети по зоне
- Выбирает первую доступную подсеть в зоне
- Поддерживает различные образы ОС
- Настраивает SSH доступ
- Предоставляет гибкие параметры для конфигурации ВМ

## Переменные

### Обязательные

- `folder_id`  - ID каталога в Yandex Cloud
- `vpc_id`  - ID VPC для создания виртуальной машины
- `vm_name`  - Имя виртуальной машины

### Опциональные
- `zone`   - Зона доступности (по умолчанию `ru-central1-a`)
- `platform_id` - Платформа процессора (по умолчанию `standard-v3`)
- `cores` - Количество vCPU (от 1 до 96) (по умолчанию `2`)
- `memory` - Объем оперативной памяти в ГБ (от 1 до 384) (по умолчанию `2`)
- `core_fraction` - Уровень производительности (значения 5, 25, 50, 100) (по умолчанию `100`) 
- `image_family` - Семейство образа ОС (по умочанию `ubuntu-2204-lts`)
- `disk_size` - Размер диска в ГБ (от 10 до 4096) (по умолчанию `20`)
- `disk_type`  - Тип диска (по умолчанию `network-ssd`)
- `nat` - Включить NAT для внешнего IP (по умолчанию `true`)
- `ssh_keys`  - Список публичных SSH ключей
- `ssh_user` - Пользователь для SSH доступа (по умолчанию `ubuntu`)
- `service_account_id` - ID сервисного аккаунта

## Выходные данные

- `instance_id`  - ID созданной ВМ
- `instance_name` - Имя созданной ВМ
- `internal_ip` - Внутренний IP адрес
- `external_ip` - Внешний IP адрес (если nat=true)
- `zone` - Зона размещения ВМ
- `subnet_id` - ID автоматически выбранной подсети
- `subnet_name` - Имя автоматически выбранной подсети
- `status` - Статус ВМ


## Использование

### 1. Инициализация модуля
terraform init

### 2. Настройка переменных
Отредактируйте файл `terraform.tfvars`:

### 3. Добавление SSH ключей
Раскомментируйте в `terraform.tfvars`:

### 4. Проверка плана
terraform plan

### 5. Применение конфигурации
terraform apply

### 6. Получение выходных данных

ID ВМ
terraform output instance_id

Внешний IP
terraform output external_ip

Вся информация
terraform output





